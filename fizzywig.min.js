(function(a,b){function d(b,d){var e={},g,h;return typeof b=="string"?g=document.querySelector(b):b instanceof Element&&(g=b),h=g.querySelectorAll("[data-content-editor-command]"),h=Array.prototype.map.apply(h,[function(a){return f(a)}]),e.enable=function(){return h.forEach(function(a){a.enable()}),e},e.disable=function(){return h.forEach(function(a){a.disable()}),e},c.emitter.on("focus",function(){e.enable()}),c.emitter.on("blur",function(){document.selection?range=document.selection.createRange():range=a.getSelection(),range.rangeCount||e.disable()}),e.disable()}function e(a,b){function g(a){return function(b){c.emitter.emit(a)}}var d={},e={},f;return f=a.getAttribute("data-content-editable")||"data",i(e,f,a.innerHTML),d.enable=function(){return a.setAttribute("contentEditable",!0),d},d.disable=function(){return a.removeAttribute("contentEditable"),d},d.json=function(){return e},j(a,"focus",g("focus")),j(a,"blur",g("blur")),j(a,"keyup",g("keyup")),j(a,"mouseup",g("mouseup")),d.enable()}function f(a){function e(a){a.preventDefault(),document.execCommand(d,!1,null)}var b={},d;return d=a.getAttribute("data-content-editor-command"),b.enable=function(){a.removeAttribute("disabled")},b.disable=function(){a.setAttribute("disabled","disabled")},b.activate=function(){l(a,"active")},b.deactivate=function(){m(a,"active")},c.emitter.on("keyup mouseup",function(){var a=document.queryCommandState(d);a?b.activate():b.deactivate()}),j(a,"click",e),b}function g(){var a={},b={};return a.on=function(c,d){return c=c.split(/\s+/),c.forEach(function(a){b[a]=b[a]||[],b[a].indexOf(d)===-1&&b[a].push(d)}),a},a.off=function(c,d){return c=c.split(/\s+/),c.forEach(function(a){if(b[a]){var c=b[a].indexOf(d);b[a]=b[a].slice(0,c).concat(b[a].slice(c+1))}}),a},a.emit=function(a,c){a=a.split(/\s+/),a.forEach(function(a){b[a]&&b[a].forEach(function(a){a.apply(this,c)})})},a}function h(){var a=Array.prototype.slice.apply(arguments);return a.reduce(function(a,b){return Object.keys(b).forEach(function(c){a[c]&&a[c].constructor===Object&&b[c].constructor===Object?h(a[c],b[c]):a[c]=b[c]}),a})}function i(a,b,c){function d(a,b,c,d){return a[b]}function e(a,b,d,e){return d===e.length-1?a[b]=c:a[b]=a[b]||{}}return typeof b=="string"&&(b=b.split(".")),b.reduce(typeof c=="undefined"?d:e,a)}function j(a,b,c,d){a.addEventListener?a.addEventListener(b,n.apply(this,[c]),d||!1):a.attachEvent&&a.attachEvent("on"+b,n.apply(this,[c]))}function k(a,b,c){a.addEventListener?a.removeEventListener(b,n.apply(this,[c])):a.attachEvent&&a.detachEvent("on"+b,n.apply(this,[c]))}function l(a,b){var c=a.className.split(/\s+/);c.indexOf(b)===-1&&c.push(b),a.className=c.join(" ")}function m(a,b){var c=a.className.split(/\s+/),d=c.indexOf(b);d!==-1&&(c=c.slice(0,d).concat(c.slice(d+1))),a.className=c.join(" ")}function n(b){return function(c){c||(c=a.event);if(!("defaultPrevented"in c)){c.defaultPrevented=!1;var d=c.preventDefault;c.preventDefault=function(){this.defaultPrevented=!0,this.returnValue=!1,d.call(this)}}c.target=c.target||c.srcElement,c.which=c.keyCode||c.charCode,b.apply(this,[c])}}var c;c={version:"0.0.1"},c.content=function(a){var b={},c,f,g;if(typeof a=="string")c=document.querySelectorAll(a);else if(a instanceof c||Array.isArray(a))c=a;return c=Array.prototype.map.apply(c,[function(a){return e(a,b)}]),b.toolbar=function(a){return arguments.length?(f=d(a,b),b):f},b.enable=function(){return c.forEach(function(a){a.enable()}),b},b.disable=function(){return c.forEach(function(a){a.disable()}),b},b.json=function(){var a={},b=c.map(function(a){return a.json()});return b.unshift(a),h.apply(null,b),a},b.enable()},c.emitter=g(),a.fizzywig=c})(window);